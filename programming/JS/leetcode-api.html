<script>
  // Just some constants
const LEETCODE_API_ENDPOINT = 'https://cors-proxy.maxsimmonds1337.workers.dev?https://leetcode.com/graphql'
const GetProgress = `
query getUserProfile($username: String!) {
  matchedUser(username: $username) {
    username
    submitStats: submitStatsGlobal {
      acSubmissionNum {
        difficulty
        count
        submissions
      }
    }
  }
}`
    
// We can pass the JSON response as an object to our createTodoistTask later.
const fetchDailyCodingChallenge = async () => {
    console.log(`Fetching daily coding challenge from LeetCode API.`)

    const init = {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
			query: GetProgress,
			variables: {username : "theengineeringoctopus"}, // this refers to SKU 
		}),
    }

    const response = await fetch(LEETCODE_API_ENDPOINT, init)
    //console.log(response.json());
    return response.json()
}
</script>

<html>
	<h1>Leetcode stats</h1>

	<body>
		<div id = "code">

		</div>
		<script>
			data = fetchDailyCodingChallenge();
			data.then("done");
			data.catch("err");
			//document.getElementById("code").innerHTML = ;
			//data.catch(document.getElementById("code").innerHTML = "error");
		</script>
	</body>
</html>
