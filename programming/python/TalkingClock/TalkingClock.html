
<script>
    // Just some constants
  const LEETCODE_API_ENDPOINT = 'https://cors-proxy.maxsimmonds1337.workers.dev?https://talking-clock.herokuapp.com/'
  const GetProgress = `
  query getUserProfile($username: String!) {
    matchedUser(username: $username) {
      username
      submitStats: submitStatsGlobal {
        acSubmissionNum {
          difficulty
          count
          submissions
        }
      }
    }
  }`
      
  // We can pass the JSON response as an object to our createTodoistTask later.
  const fetchDailyCodingChallenge = async () => {
      console.log(`Fetching daily coding challenge from LeetCode API.`)
  
      const init = {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: {"time": ""},
      }
  
      const response = await fetch(LEETCODE_API_ENDPOINT, init)
      return response.json();
  
  }
  
  function display_results(response_json) {
  
      const username = response_json.data.matchedUser.username;
  
      const total_submissions = response_json.data[0];
  
      document.getElementById("username").innerHTML = "User: " + username;
    
  }
  
  </script>
  
  <html>
      <h1>Leetcode stats</h1>
  
      <body id = "body">
          <div id = "username"></div>
          <div id = "total_submissions"></div>
          <div id = "easy_completed"></div>
          <div id = "medium_completed"></div>
          <div id = "hard_completed"></div>
  
          <script>
              let data = fetchDailyCodingChallenge();
              data.then(display_results);
          </script>
      </body>
  </html>
  